{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin.css') }}">
{% endblock %}

{% block body %}
<!-- Full-width Admin Navigation Bar -->
<nav class="admin-nav-bar">
    <div class="admin-nav-container">
        <ul class="admin-tab-list">
            <li class="admin-tab-item">
                <a href="{{ url_for('admin.admin_dashboard') }}" class="admin-tab-link" id="profiles-tab">
                    üìä Profiles
                </a>
            </li>
            <li class="admin-tab-item">
                <a href="{{ url_for('admin.create_account') }}" class="admin-tab-link" id="create-account-tab">
                    ‚ûï Create Account
                </a>
            </li>
            <li class="admin-tab-item">
                <a href="{{ url_for('admin.export_accounts_zip') }}" class="admin-tab-link" id="csv-tab">
                    üìÅ Export Accounts
                </a>
            </li>
        </ul>
    </div>
</nav>

<!-- Admin Content Area -->
<div class="admin-content mx-5">
    {% block admin_content %}{% endblock %}
</div>

<script>
// Tab functionality for admin pages
document.addEventListener('DOMContentLoaded', function() {
    // Set active tab based on current URL
    const currentPath = window.location.pathname;
    const tabLinks = document.querySelectorAll('.admin-tab-link');
    
    tabLinks.forEach(function(link) {
        link.classList.remove('active');
        
        // Check if this tab link matches the current page
        const linkPath = new URL(link.href).pathname;
        if (linkPath === currentPath) {
            link.classList.add('active');
        }
    });
    
    // If no exact match found (e.g., on profile pages), default to "Profiles" tab
    const hasActiveTab = document.querySelector('.admin-tab-link.active');
    if (!hasActiveTab) {
        const profilesTab = document.getElementById('profiles-tab');
        if (profilesTab && (currentPath.includes('/admin/teacher_profile') || currentPath.includes('/admin/student_profile'))) {
            profilesTab.classList.add('active');
        }
    }
});
</script>
{% endblock %}